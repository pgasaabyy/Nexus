{% extends 'escola/base_professor.html' %}
{% load static %}

{% block title %}Dashboard - Professor{% endblock %}
{% block nav_dashboard %}active{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-section">
    <div class="stats-row">
        <div class="stat-card">
            <div class="stat-info">
                <span class="stat-value">{% if turmas %}{{ turmas|length }}{% else %}0{% endif %}</span>
                <span class="stat-label">Turmas Ativas</span>
            </div>
            <div class="stat-icon blue">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                    <line x1="8" y1="21" x2="16" y2="21"></line>
                    <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-info">
                <span class="stat-value">{% if turmas %}{% for t in turmas %}{{ t.total_alunos }}{% if not forloop.last %}+{% endif %}{% endfor %}{% else %}0{% endif %}</span>
                <span class="stat-label">Total de Alunos</span>
            </div>
            <div class="stat-icon green">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-info">
                <span class="stat-value">{% now "d/m" %}</span>
                <span class="stat-label">Data Atual</span>
            </div>
            <div class="stat-icon orange">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
            </div>
        </div>
    </div>
    
    <div class="content-grid">
        <div class="content-card">
            <div class="card-header">
                <h3>Minhas Turmas</h3>
                <a href="{% url 'professor_notas' %}" class="link-more">Lançar Notas</a>
            </div>
            <div class="card-body">
                {% if turmas %}
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Turma</th>
                            <th>Alunos</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for turma in turmas %}
                        <tr>
                            <td>{{ turma.codigo }}</td>
                            <td>{{ turma.total_alunos }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p class="empty-message">Nenhuma turma associada.</p>
                {% endif %}
            </div>
        </div>
        
        <div class="content-card">
            <div class="card-header">
                <h3>Avisos Recentes</h3>
                <a href="{% url 'professor_comunicados' %}" class="link-more">Ver todos</a>
            </div>
            <div class="card-body">
                {% if avisos %}
                <div class="avisos-list">
                    {% for aviso in avisos %}
                    <div class="aviso-item">
                        <div class="aviso-title">{{ aviso.titulo }}</div>
                        <div class="aviso-date">{{ aviso.data_criacao|date:"d/m/Y" }}</div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p class="empty-message">Nenhum aviso recente.</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="quick-actions">
        <h3>Ações Rápidas</h3>
        <div class="action-buttons">
            <a href="{% url 'professor_notas' %}" class="action-btn primary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                </svg>
                Lançar Notas
            </a>
            <a href="{% url 'professor_frequencia' %}" class="action-btn secondary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                </svg>
                Registrar Frequência
            </a>
        </div>
    </div>
</div>
{% endblock %}
