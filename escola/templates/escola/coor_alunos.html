{% extends 'escola/base_coordenacao.html' %}

{% block title %}Alunos - Coordenação{% endblock %}
{% block nav_alunos %}active{% endblock %}
{% block page_title %}Gestão de Alunos{% endblock %}

{% block extra_css %}
<style>
    .search-section {
        background: white;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 24px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .search-form {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
    }
    
    .search-form input,
    .search-form select {
        padding: 10px 14px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 14px;
    }
    
    .search-form input {
        flex: 1;
        min-width: 200px;
    }
    
    .search-form button {
        padding: 10px 24px;
        background: #003366;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
    }
    
    .grade-tag {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 10px;
        font-weight: 600;
        font-size: 13px;
    }
    
    .grade-tag.good { background: #d4edda; color: #155724; }
    .grade-tag.medium { background: #fff3cd; color: #856404; }
    .grade-tag.low { background: #f8d7da; color: #721c24; }
</style>
{% endblock %}

{% block content %}
<div class="search-section">
    <form method="GET" class="search-form">
        <input type="text" name="busca" placeholder="Buscar por nome ou matrícula..." value="{{ busca }}">
        <select name="turma">
            <option value="">Todas as turmas</option>
            {% for turma in turmas %}
            <option value="{{ turma.id }}" {% if turma_filtro == turma.id|stringformat:"s" %}selected{% endif %}>
                {{ turma.codigo }}
            </option>
            {% endfor %}
        </select>
        <button type="submit">Buscar</button>
    </form>
</div>

<div class="content-card">
    <div class="card-header">
        <h3>Lista de Alunos ({{ alunos|length }})</h3>
    </div>
    <div class="card-body">
        {% if alunos %}
        <table class="data-table">
            <thead>
                <tr>
                    <th>Matrícula</th>
                    <th>Nome</th>
                    <th>Turma</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody>
                {% for aluno in alunos %}
                <tr>
                    <td>{{ aluno.matricula }}</td>
                    <td>{{ aluno.nome }}</td>
                    <td>{% if aluno.turma_atual %}{{ aluno.turma_atual.codigo }}{% else %}-{% endif %}</td>
                    <td>{{ aluno.email }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="empty-message">Nenhum aluno encontrado.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
