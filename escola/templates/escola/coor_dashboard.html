{% extends 'escola/base_coordenacao.html' %}

{% block title %}Dashboard - Coordenação{% endblock %}
{% block nav_dashboard %}active{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-section">
    <div class="stats-row">
        <div class="stat-card">
            <div class="stat-info">
                <span class="stat-value">{{ total_alunos }}</span>
                <span class="stat-label">Total de Alunos</span>
            </div>
            <div class="stat-icon blue">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-info">
                <span class="stat-value">{{ total_professores }}</span>
                <span class="stat-label">Professores</span>
            </div>
            <div class="stat-icon green">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                    <line x1="8" y1="21" x2="16" y2="21"></line>
                    <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-info">
                <span class="stat-value">{{ total_turmas }}</span>
                <span class="stat-label">Turmas Ativas</span>
            </div>
            <div class="stat-icon purple">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
        </div>
    </div>
    
    <div class="content-grid">
        <div class="content-card">
            <div class="card-header">
                <h3>Turmas por Número de Alunos</h3>
            </div>
            <div class="card-body">
                {% if turmas %}
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Turma</th>
                            <th>Alunos</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for turma in turmas %}
                        <tr>
                            <td>{{ turma.codigo }}</td>
                            <td>{{ turma.total_alunos }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p class="empty-message">Nenhuma turma cadastrada.</p>
                {% endif %}
            </div>
        </div>
        
        <div class="content-card">
            <div class="card-header">
                <h3>Avisos Recentes</h3>
                <a href="{% url 'coordenacao_comunicados' %}" class="link-more">Ver todos</a>
            </div>
            <div class="card-body">
                {% if avisos %}
                <div class="avisos-list">
                    {% for aviso in avisos %}
                    <div class="aviso-item">
                        <div class="aviso-title">{{ aviso.titulo }}</div>
                        <div class="aviso-date">{{ aviso.data_criacao|date:"d/m/Y" }}</div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p class="empty-message">Nenhum aviso recente.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
